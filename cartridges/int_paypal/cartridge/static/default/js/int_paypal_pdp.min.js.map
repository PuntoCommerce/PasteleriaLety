{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./cartridges/int_paypal/cartridge/client/default/js/api.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/helper.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/loader.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/pdp/initPdpButton.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/pdp/pdp.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/pdp/pdpHelper.js","webpack:///./cartridges/int_paypal/cartridge/client/default/js/pdp/registered/initBillingAgreementButton.js"],"names":["loaderInstance","require","$loaderContainer","document","querySelector","loader","showCartErrorHtml","message","$","addClass","append","window","scrollTo","showCheckoutErrorHtml","textContent","style","display","updateOrderData","show","ajax","url","paypalUrls","type","success","hide","location","href","placeOrderStage","error","err","JSON","parse","responseText","errorMsg","transactionExpired","reload","getPurchaseUnits","get","getPurchaseUnit","then","purchase_units","getBillingAgreementToken","isCartFlow","createBillingAgreementToken","data","createBillingAgreementCall","billingToken","createBillingAgreement","contentType","stringify","createCartBillingFormData","fieldsData","$paypalButton","cartBillingFormData","FormData","cartBillingFields","getAttribute","Object","entries","forEach","entry","key","field","name","value","returnFromCart","processData","finishLpmOrder","details","lpmName","paypalMethodId","defaultStyle","color","shape","layout","label","tagline","getPaypalButtonStyle","button","config","buttonConfigs","createConfirmForm","param","form","appendTo","body","attr","method","action","orderID","orderToken","processLpmConfirmForm","redirectUrl","splitUrl","split","paramsString","searchParams","URLSearchParams","formParam","submit","module","exports","containerElement","Constructor","containerEl","prototype","pid","uuid","removeFromCartUrl","usedPaymentMethod","onClick","fundingSource","createOrder","_","actions","res","addProductForPDPbtnFlow","cart","pliUUID","actionUrls","removeProductLineItemUrl","Error","getCartPurchaseUnit","parsedPurchaseUnit","amount","application_context","shipping_preference","order","create","onApprove","paypalOrderID","cartPage","onCancel","urlParams","appendToUrl","dataType","spinner","stop","onError","productID","initPaypalButton","paypal","Buttons","render","$paypalPdpImage","$paypalPDPButton","$isBAEnabled","addEventListener","initPaypalBAButton","showPDPButton","hidePDPButton","$bundleItem","getOptions","$productContainer","options","find","map","$elOption","urlValue","val","selectedValueId","optionId","toArray","$btn","closest","quantity","length","items","text","parseInt","childProducts","response","async","responseJSON","newUrl","indexOf","keys","encodeURIComponent","join","$price","isZeroAmount","$miniCartQuantity","$addToCartButton","disabled","on","token","fail","id","payer","billingAgreementID","billingAgreementPayerEmail","payer_info","email"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClFA,IAAIA,cAAc,GAAGC,mBAAO,CAAC,+EAAD,CAA5B;;AACA,IAAIC,gBAAgB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAvB;AACA,IAAIC,MAAM,GAAGL,cAAc,CAACE,gBAAD,CAA3B;AACA;;;;;;AAKA,SAASI,iBAAT,CAA2BC,OAA3B,EAAoC;AAChCC,GAAC,CAAC,eAAD,CAAD,CAAmBC,QAAnB,CAA4B,UAA5B;AACAD,GAAC,CAAC,aAAD,CAAD,CAAiBE,MAAjB,qTAKUH,OALV;AAQAI,QAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACH;AAED;;;;;;;AAKA,SAASC,qBAAT,CAA+BN,OAA/B,EAAwC;AACpCJ,UAAQ,CAACC,aAAT,CAAuB,qBAAvB,EAA8CU,WAA9C,GAA4D,EAA5D;AACAX,UAAQ,CAACC,aAAT,CAAuB,gBAAvB,EAAyCW,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACAb,UAAQ,CAACC,aAAT,CAAuB,qBAAvB,EAA8CM,MAA9C,CAAqDH,OAArD;AACAI,QAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACH;AAED;;;;;;;AAKA,SAASK,eAAT,GAA2B;AACvBZ,QAAM,CAACa,IAAP;AACA,SAAOV,CAAC,CAACW,IAAF,CAAO;AACVC,OAAG,EAAET,MAAM,CAACU,UAAP,CAAkBJ,eAAlB,GAAoC,kBAD/B;AAEVK,QAAI,EAAE,OAFI;AAGVC,WAAO,EAAE,mBAAM;AACXlB,YAAM,CAACmB,IAAP;AACAb,YAAM,CAACc,QAAP,CAAgBC,IAAhB,GAAuBf,MAAM,CAACU,UAAP,CAAkBM,eAAzC;AACH,KANS;AAOVC,SAAK,EAAE,eAACC,GAAD,EAAS;AACZxB,YAAM,CAACmB,IAAP;AACA,UAAII,KAAK,GAAGE,IAAI,CAACC,KAAL,CAAWF,GAAG,CAACG,YAAf,CAAZ;AACA1B,uBAAiB,CAACsB,KAAK,CAACK,QAAP,CAAjB;;AACA,UAAIL,KAAK,CAACM,kBAAV,EAA8B;AAC1BT,gBAAQ,CAACU,MAAT;AACH;AACJ;AAdS,GAAP,CAAP;AAgBH;AAED;;;;;;;AAKA,SAASC,gBAAT,GAA4B;AACxB,SAAO5B,CAAC,CAAC6B,GAAF,CAAM1B,MAAM,CAACU,UAAP,CAAkBiB,eAAxB,EACFC,IADE,CACG;AAAA,QAAGC,cAAH,QAAGA,cAAH;AAAA,WAAwBA,cAAxB;AAAA,GADH,CAAP;AAEH;AAED;;;;;;;;AAMA,SAASC,wBAAT,GAAsD;AAAA,MAApBC,UAAoB,uEAAP,KAAO;AAClD,SAAOlC,CAAC,CAAC6B,GAAF,CAAM1B,MAAM,CAACU,UAAP,CAAkBsB,2BAAlB,yBAA+DD,UAA/D,CAAN,EACFH,IADE,CACG,UAACK,IAAD;AAAA,WAAUA,IAAV;AAAA,GADH,CAAP;AAEH;AAED;;;;;;;;;;AAQA,SAASC,0BAAT,CAAoCC,YAApC,EAAkD;AAC9C,SAAOtC,CAAC,CAACW,IAAF,CAAO;AACVC,OAAG,EAAET,MAAM,CAACU,UAAP,CAAkB0B,sBADb;AAEVzB,QAAI,EAAE,MAFI;AAGV0B,eAAW,EAAE,kBAHH;AAIVJ,QAAI,EAAEd,IAAI,CAACmB,SAAL,CAAe;AAAEH,kBAAY,EAAZA;AAAF,KAAf;AAJI,GAAP,CAAP;AAMH;AAED;;;;;;;;;AAOA,SAASI,yBAAT,CAAmCC,UAAnC,EAA+CC,aAA/C,EAA8D;AAC1D,MAAIC,mBAAmB,GAAG,IAAIC,QAAJ,EAA1B;;AACA,MAAI,CAACF,aAAL,EAAoB;AAChBA,iBAAa,GAAGjD,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,KAA+CD,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAA/C,IAA0FD,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAA1G;AACH;;AACD,MAAImD,iBAAiB,GAAGH,aAAa,IAAItB,IAAI,CAACC,KAAL,CAAWqB,aAAa,CAACI,YAAd,CAA2B,iCAA3B,CAAX,CAAzC;AAEAC,QAAM,CAACC,OAAP,CAAeH,iBAAf,EAAkCI,OAAlC,CAA0C,UAAAC,KAAK,EAAI;AAAA,gCAC1BA,KAD0B;AAAA,QACxCC,GADwC;AAAA,QACnCC,KADmC;;AAE/C,QAAI,QAAOA,KAAP,MAAiB,QAArB,EAA+B;AAC3BT,yBAAmB,CAAC3C,MAApB,CAA2BoD,KAAK,CAACC,IAAjC,EAAuCZ,UAAU,IAAIA,UAAU,CAACU,GAAD,CAAxB,GAAgCV,UAAU,CAACU,GAAD,CAA1C,GAAkDC,KAAK,CAACE,KAA/F;AACH;AACJ,GALD;AAOA,SAAOX,mBAAP;AACH;AAED;;;;;;;AAKA,SAASY,cAAT,GAA0B;AACtB5D,QAAM,CAACa,IAAP;AACA,MAAImC,mBAAmB,GAAGH,yBAAyB,EAAnD;AAEA,SAAO1C,CAAC,CAACW,IAAF,CAAO;AACVC,OAAG,EAAET,MAAM,CAACU,UAAP,CAAkB4C,cADb;AAEV3C,QAAI,EAAE,MAFI;AAGV0B,eAAW,EAAE,KAHH;AAIVJ,QAAI,EAAES,mBAJI;AAKVa,eAAW,EAAE,KALH;AAMV3C,WAAO,EAAE,mBAAM;AACXlB,YAAM,CAACmB,IAAP;AACAb,YAAM,CAACc,QAAP,CAAgBC,IAAhB,GAAuBf,MAAM,CAACU,UAAP,CAAkBM,eAAzC;AACH,KATS;AAUVC,SAAK,EAAE,eAAUC,GAAV,EAAe;AAClBxB,YAAM,CAACmB,IAAP;AACAlB,uBAAiB,CAACuB,GAAG,CAACG,YAAL,CAAjB;AACH;AAbS,GAAP,CAAP;AAeH;AAED;;;;;;;AAKA,SAASmC,cAAT,CAAwBC,OAAxB,EAAiC;AAC7B,MAAMC,OAAO,GAAGlE,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,EAA6C4D,KAA7D;AACA,MAAMM,cAAc,GAAGnE,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0C4D,KAAjE;AACA,SAAOxD,CAAC,CAACW,IAAF,CAAO;AACVC,OAAG,EAAET,MAAM,CAACU,UAAP,CAAkB8C,cADb;AAEV7C,QAAI,EAAE,MAFI;AAGV0B,eAAW,EAAE,kBAHH;AAIVJ,QAAI,EAAEd,IAAI,CAACmB,SAAL,CAAe;AACjBmB,aAAO,EAAPA,OADiB;AAEjBC,aAAO,EAAPA,OAFiB;AAGjBC,oBAAc,EAAdA;AAHiB,KAAf;AAJI,GAAP,CAAP;AAUH;;;;;;;;;;;;;;ACpKD;AAAA;AAAA;AAAA,IAAMC,YAAY,GAAG;AACjBC,OAAK,EAAE,MADU;AAEjBC,OAAK,EAAE,MAFU;AAGjBC,QAAM,EAAE,UAHS;AAIjBC,OAAK,EAAE,QAJU;AAKjBC,SAAO,EAAE;AALQ,CAArB;AAQA;;;;;;AAKA,SAASC,oBAAT,CAA8BC,MAA9B,EAAsC;AAClC,MAAI;AACA,QAAMC,MAAM,GAAGD,MAAM,CAACtB,YAAP,CAAoB,2BAApB,CAAf;;AACA,QAAIuB,MAAJ,EAAY;AACR,UAAMC,aAAa,GAAGlD,IAAI,CAACC,KAAL,CAAWgD,MAAX,CAAtB;AACA,aAAOC,aAAa,CAACjE,KAArB;AACH;AACJ,GAND,CAME,OAAOa,KAAP,EAAc;AACZ,WAAO;AACHb,WAAK,EAAEwD;AADJ,KAAP;AAGH;AACJ;AAED;;;;;;;AAKA,SAASU,iBAAT,CAA2BC,KAA3B,EAAkC;AAC9B,MAAIC,IAAI,GAAG3E,CAAC,CAAC,QAAD,CAAD,CACN4E,QADM,CACGjF,QAAQ,CAACkF,IADZ,EAENC,IAFM,CAED;AACFC,UAAM,EAAE,MADN;AAEFC,UAAM,EAAEN,KAAK,CAAC9D;AAFZ,GAFC,CAAX;AAOAZ,GAAC,CAAC,SAAD,CAAD,CACK4E,QADL,CACcD,IADd,EAEKG,IAFL,CAEU;AACFvB,QAAI,EAAE,SADJ;AAEFC,SAAK,EAAEkB,KAAK,CAACO;AAFX,GAFV;AAOAjF,GAAC,CAAC,SAAD,CAAD,CACK4E,QADL,CACcD,IADd,EAEKG,IAFL,CAEU;AACFvB,QAAI,EAAE,YADJ;AAEFC,SAAK,EAAEkB,KAAK,CAACQ;AAFX,GAFV;AAOA,SAAOP,IAAP;AACH;AAED;;;;;;AAIA,SAASQ,qBAAT,CAA+BC,WAA/B,EAA4C;AACxC,MAAIC,QAAQ,GAAGD,WAAW,CAACE,KAAZ,CAAkB,GAAlB,CAAf;AACA,MAAI1E,GAAG,GAAGyE,QAAQ,CAAC,CAAD,CAAlB;AACA,MAAIE,YAAY,GAAGF,QAAQ,CAAC,CAAD,CAA3B;AACA,MAAIG,YAAY,GAAG,IAAIC,eAAJ,CAAoBF,YAApB,CAAnB;AACA,MAAIG,SAAS,GAAG;AACZT,WAAO,EAAEO,YAAY,CAAC3D,GAAb,CAAiB,SAAjB,CADG;AAEZqD,cAAU,EAAEM,YAAY,CAAC3D,GAAb,CAAiB,YAAjB,CAFA;AAGZjB,OAAG,EAAEA;AAHO,GAAhB;AAKA,MAAI+D,IAAI,GAAGF,iBAAiB,CAACiB,SAAD,CAA5B;AAEAf,MAAI,CAACgB,MAAL;AACH;;;;;;;;;;;;;AC1ED;AACAC,MAAM,CAACC,OAAP,GAAiB,UAAUC,gBAAV,EAA4B;AACzC,WAASC,WAAT,GAAuB;AACnB,SAAKC,WAAL,GAAmBF,gBAAnB;AACH;;AACDC,aAAW,CAACE,SAAZ,CAAsBvF,IAAtB,GAA6B,YAAY;AACrC,SAAKsF,WAAL,CAAiBzF,KAAjB,CAAuBC,OAAvB,GAAiC,OAAjC;AACH,GAFD;;AAGAuF,aAAW,CAACE,SAAZ,CAAsBjF,IAAtB,GAA6B,YAAY;AACrC,SAAKgF,WAAL,CAAiBzF,KAAjB,CAAuBC,OAAvB,GAAiC,MAAjC;AACH,GAFD;;AAGA,SAAO,IAAIuF,WAAJ,EAAP;AACH,CAXD,C;;;;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;AAIA;AAIA;;AAIA,IAAIvG,cAAc,GAAGC,mBAAO,CAAC,gFAAD,CAA5B;;AACA,IAAIC,gBAAgB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAvB;AACA,IAAIC,MAAM,GAAGL,cAAc,CAACE,gBAAD,CAA3B;AACA,IAAIwG,GAAJ;AACA,IAAIC,IAAJ;AACA,IAAIC,iBAAJ;AACA,IAAIC,iBAAJ;AAEA;;;;;;AAKA,SAASC,OAAT,CAAiBlE,IAAjB,EAAuB;AACnB,MAAIA,IAAI,CAACmE,aAAL,KAAuB,OAA3B,EAAoC;AAChCF,qBAAiB,GAAG,OAApB;AACH;AACJ;AAED;;;;;;;;;AAOA,SAASG,WAAT,CAAqBC,CAArB,EAAwBC,OAAxB,EAAiC;AAC7B7G,QAAM,CAACa,IAAP;AACA,MAAIiG,GAAG,GAAGC,0EAAuB,EAAjC;;AACA,MAAID,GAAG,CAACE,IAAR,EAAc;AACVV,QAAI,GAAGQ,GAAG,CAACG,OAAX;AACAV,qBAAiB,GAAGO,GAAG,CAACE,IAAJ,CAASE,UAAT,CAAoBC,wBAAxC;AACAd,OAAG,GAAGS,GAAG,CAACT,GAAV;AACH,GAJD,MAIO;AACHrG,UAAM,CAACmB,IAAP;AACA,UAAM,IAAIiG,KAAJ,CAAUN,GAAG,CAAC5G,OAAJ,IAAe,cAAzB,CAAN;AACH;;AAED,SAAOC,CAAC,CACH6B,GADE,CACE1B,MAAM,CAACU,UAAP,CAAkBqG,mBADpB,EAEFnF,IAFE,CAEG,gBAA8B;AAAA,QAAlBC,cAAkB,QAAlBA,cAAkB;AAChC,QAAImF,kBAAkB,GAAGnF,cAAc,CAAC,CAAD,CAAvC;;AACA,QAAIV,IAAI,CAACC,KAAL,CAAW4F,kBAAkB,CAACC,MAAnB,CAA0B5D,KAArC,MAAgD,CAApD,EAAuD;AACnD1D,oEAAiB,CAAC,yCAAD,CAAjB;AACH;;AACD,QAAMuH,mBAAmB,GAAG;AACxBC,yBAAmB,EAAEH,kBAAkB,CAACG;AADhB,KAA5B;AAGAzH,UAAM,CAACmB,IAAP;AACA,WAAO0F,OAAO,CAACa,KAAR,CAAcC,MAAd,CAAqB;AACxBxF,oBAAc,EAAdA,cADwB;AAExBqF,yBAAmB,EAAnBA;AAFwB,KAArB,CAAP;AAIH,GAfE,CAAP;AAgBH;AAED;;;;;;;AAKA,SAASI,SAAT,QAAgC;AAAA,MAAXxC,OAAW,SAAXA,OAAW;AAC5B,MAAIpC,mBAAmB,GAAGH,sEAAyB,CAAC;AAChDgF,iBAAa,EAAEzC,OADiC;AAEhDoB,qBAAiB,EAAEA;AAF6B,GAAD,EAGhD1G,QAAQ,CAACC,aAAT,CAAuB,+BAAvB,CAHgD,CAAnD;AAKAI,GAAC,CAACW,IAAF,CAAO;AACHG,QAAI,EAAE,MADH;AAEHF,OAAG,EAAET,MAAM,CAACU,UAAP,CAAkB4C,cAFpB;AAGHjB,eAAW,EAAE,KAHV;AAIHJ,QAAI,EAAES,mBAJH;AAKHa,eAAW,EAAE,KALV;AAMH3C,WAAO,EAAE,mBAAM;AACXlB,YAAM,CAACmB,IAAP;AACAb,YAAM,CAACc,QAAP,CAAgBC,IAAhB,GAAuBf,MAAM,CAACU,UAAP,CAAkBM,eAAzC;AACH,KATE;AAUHC,SAAK,EAAE,iBAAY;AACfvB,YAAM,CAACmB,IAAP;AACAb,YAAM,CAACc,QAAP,CAAgBC,IAAhB,GAAuBf,MAAM,CAACU,UAAP,CAAkB8G,QAAzC;AACH;AAbE,GAAP;AAeH;AAED;;;;;;AAIA,SAASC,QAAT,GAAoB;AAChB,MAAIC,SAAS,GAAG;AACZ3B,OAAG,EAAEA,GADO;AAEZC,QAAI,EAAEA;AAFM,GAAhB;AAKAnG,GAAC,CAACW,IAAF,CAAO;AACHC,OAAG,EAAEkH,8DAAW,CAAC1B,iBAAD,EAAoByB,SAApB,CADb;AAEH/G,QAAI,EAAE,KAFH;AAGHiH,YAAQ,EAAE,MAHP;AAIHhH,WAAO,EAAE,mBAAY;AACjBf,OAAC,CAACgI,OAAF,GAAYC,IAAZ;AACH,KANE;AAOH7G,SAAK,EAAE,iBAAY;AACfpB,OAAC,CAACgI,OAAF,GAAYC,IAAZ;AACH;AATE,GAAP;AAWApI,QAAM,CAACmB,IAAP;AACH;AAED;;;;;;AAIA,SAASkH,OAAT,GAAmB;AACf,MAAIhC,GAAJ,EAAS;AACL,QAAIiC,SAAS,GAAGjC,GAAhB;AACA,QAAI2B,SAAS,GAAG;AACZ3B,SAAG,EAAEiC,SADO;AAEZhC,UAAI,EAAEA;AAFM,KAAhB;AAKAnG,KAAC,CAACW,IAAF,CAAO;AACHC,SAAG,EAAEkH,8DAAW,CAAC1B,iBAAD,EAAoByB,SAApB,CADb;AAEH/G,UAAI,EAAE,KAFH;AAGHiH,cAAQ,EAAE,MAHP;AAIHhH,aAAO,EAAE,mBAAY;AACjBf,SAAC,CAACgI,OAAF,GAAYC,IAAZ;AACH,OANE;AAOH7G,WAAK,EAAE,iBAAY;AACfpB,SAAC,CAACgI,OAAF,GAAYC,IAAZ;AACH;AATE,KAAP;AAWH;;AACDpI,QAAM,CAACmB,IAAP;AACAb,QAAM,CAACc,QAAP,CAAgBC,IAAhB,GAAuBf,MAAM,CAACU,UAAP,CAAkB8G,QAAzC;AACH;AAED;;;;;AAGA,SAASS,gBAAT,GAA4B;AACxBvI,QAAM,CAACa,IAAP;AACAP,QAAM,CAACkI,MAAP,CAAcC,OAAd,CAAsB;AAClBhC,WAAO,EAAPA,OADkB;AAElBE,eAAW,EAAXA,WAFkB;AAGlBiB,aAAS,EAATA,SAHkB;AAIlBG,YAAQ,EAARA,QAJkB;AAKlBM,WAAO,EAAPA,OALkB;AAMlB3H,SAAK,EAAE8D,oEAAoB,CAAC1E,QAAQ,CAACC,aAAT,CAAuB,+BAAvB,CAAD;AANT,GAAtB,EAOG2I,MAPH,CAOU,oBAPV,EAQKxG,IARL,CAQU,YAAM;AACRlC,UAAM,CAACmB,IAAP;AACH,GAVL;AAWH;;AAEcoH,+EAAf,E;;;;;;;;;;;;ACtKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;AAEA,IAAM5I,cAAc,GAAGC,mBAAO,CAAC,gFAAD,CAA9B;;AACA,IAAIC,gBAAgB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAvB;AACA,IAAIC,MAAM,GAAGL,cAAc,CAACE,gBAAD,CAA3B;AAEA,IAAI8I,eAAe,GAAG7I,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,CAAtB;AACA,IAAI6I,gBAAgB,GAAG9I,QAAQ,CAACC,aAAT,CAAuB,+BAAvB,CAAvB;AACA,IAAI8I,YAAY,GAAGD,gBAAgB,IAAInH,IAAI,CAACC,KAAL,CAAWkH,gBAAgB,CAACzF,YAAjB,CAA8B,wBAA9B,CAAX,CAAvC;AACA,IAAMnC,UAAU,GAAGlB,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,EAA6CoD,YAA7C,CAA0D,kBAA1D,CAAnB;AACA7C,MAAM,CAACU,UAAP,GAAoBS,IAAI,CAACC,KAAL,CAAWV,UAAX,CAApB;;AAEA,IAAI2H,eAAJ,EAAqB;AACjBA,iBAAe,CAACG,gBAAhB,CAAiC,OAAjC,EAA0C,YAAY;AAClD9I,UAAM,CAACa,IAAP;AACA,QAAIiG,GAAG,GAAGC,0EAAuB,EAAjC;;AACA,QAAID,GAAG,CAACE,IAAR,EAAc;AACVpD,iEAAc;AACjB,KAFD,MAEO;AACH5D,YAAM,CAACmB,IAAP;AACA,YAAM,IAAIiG,KAAJ,CAAUN,GAAG,CAAC5G,OAAJ,IAAe,cAAzB,CAAN;AACH;AACJ,GATD;AAUH,CAXD,MAWO,IAAII,MAAM,CAACkI,MAAX,EAAmB;AACtBK,cAAY,GACJE,sFAAkB,EADd,GAEJR,8DAAgB,EAFxB;AAGH,C;;;;;;;;;;;;AC/BD;AAAA;AAAA;AAAA;;;;AAIA,SAASS,aAAT,CAAuBJ,gBAAvB,EAAyC;AACrCA,kBAAgB,CAAClI,KAAjB,CAAuBC,OAAvB,GAAiC,EAAjC;AACH;AAED;;;;;;AAIA,SAASsI,aAAT,CAAuBL,gBAAvB,EAAyC;AACrCA,kBAAgB,CAAClI,KAAjB,CAAuBC,OAAvB,GAAiC,MAAjC;AACH;AAED;;;;;;AAIA,SAASoG,uBAAT,GAAmC;AAC/B,MAAImC,WAAW,GAAG/I,CAAC,CAAC,cAAD,CAAnB;AACA;;;;;;AAKA,WAASgJ,UAAT,CAAoBC,iBAApB,EAAuC;AACnC,QAAIC,OAAO,GAAGD,iBAAiB,CAC1BE,IADS,CACJ,iBADI,EAETC,GAFS,CAEL,YAAY;AACb,UAAIC,SAAS,GAAGrJ,CAAC,CAAC,IAAD,CAAD,CAAQmJ,IAAR,CAAa,iBAAb,CAAhB;AACA,UAAIG,QAAQ,GAAGD,SAAS,CAACE,GAAV,EAAf;AACA,UAAIC,eAAe,GAAGH,SAAS,CAACF,IAAV,CAAe,mBAAmBG,QAAnB,GAA8B,IAA7C,EACjBlH,IADiB,CACZ,UADY,CAAtB;AAEA,aAAO;AACHqH,gBAAQ,EAAEzJ,CAAC,CAAC,IAAD,CAAD,CAAQoC,IAAR,CAAa,WAAb,CADP;AAEHoH,uBAAe,EAAEA;AAFd,OAAP;AAIH,KAXS,EAWPE,OAXO,EAAd;AAaA,WAAOpI,IAAI,CAACmB,SAAL,CAAeyG,OAAf,CAAP;AACH;;AAED,MAAIhD,GAAG,GAAGlG,CAAC,CAAC,qCAAD,CAAD,CAAyCoC,IAAzC,CAA8C,KAA9C,CAAV;AACA,MAAIuH,IAAI,GAAG3J,CAAC,CAAC,oBAAD,CAAZ;AACA,MAAIiJ,iBAAiB,GAAGU,IAAI,CAACC,OAAL,CAAa,iBAAb,CAAxB;AAEA,MAAIjF,IAAI,GAAG;AACPuB,OAAG,EAAEA,GADE;AAEP2D,YAAQ,EAAE7J,CAAC,CAAC,kBAAD,CAAD,CAAsBuJ,GAAtB;AAFH,GAAX;;AAKA,MAAI,CAACR,WAAW,CAACe,MAAjB,EAAyB;AACrBnF,QAAI,CAACuE,OAAL,GAAeF,UAAU,CAACC,iBAAD,CAAzB;AACH,GAFD,MAEO;AACH,QAAIc,KAAK,GAAGhB,WAAW,CAACK,GAAZ,CAAgB,YAAY;AACpC,aAAO;AACHlD,WAAG,EAAElG,CAAC,CAAC,IAAD,CAAD,CAAQmJ,IAAR,CAAa,aAAb,EAA4Ba,IAA5B,EADF;AAEHH,gBAAQ,EAAEI,QAAQ,CAACjK,CAAC,CAAC,IAAD,CAAD,CAAQmJ,IAAR,CAAa,gBAAb,EAA+B/G,IAA/B,CAAoC,UAApC,CAAD,EAAkD,EAAlD;AAFf,OAAP;AAIH,KALW,CAAZ;AAMAuC,QAAI,CAACuF,aAAL,GAAqB5I,IAAI,CAACmB,SAAL,CAAesH,KAAK,CAACL,OAAN,EAAf,CAArB;AACH;;AACD,MAAIS,QAAQ,GAAGnK,CAAC,CAACW,IAAF,CAAO;AAClBC,OAAG,EAAEZ,CAAC,CAAC,kBAAD,CAAD,CAAsBuJ,GAAtB,EADa;AAElBxE,UAAM,EAAE,MAFU;AAGlBqF,SAAK,EAAE,KAHW;AAIlBhI,QAAI,EAAEuC;AAJY,GAAP,EAKZ0F,YALH;AAMAF,UAAQ,CAACjE,GAAT,GAAeA,GAAf;AACA,SAAOiE,QAAP;AACH;AAED;;;;;;;;AAMA,SAASrC,WAAT,CAAqBlH,GAArB,EAA0B8D,KAA1B,EAAiC;AAC7B,MAAI4F,MAAM,GAAG1J,GAAb;AACA0J,QAAM,IAAI,CAACA,MAAM,CAACC,OAAP,CAAe,GAAf,MAAwB,CAAC,CAAzB,GAA6B,GAA7B,GAAmC,GAApC,IAA2CtH,MAAM,CAACuH,IAAP,CAAY9F,KAAZ,EAAmB0E,GAAnB,CAAuB,UAAU/F,GAAV,EAAe;AACvF,WAAOA,GAAG,GAAG,GAAN,GAAYoH,kBAAkB,CAAC/F,KAAK,CAACrB,GAAD,CAAN,CAArC;AACH,GAFoD,EAElDqH,IAFkD,CAE7C,GAF6C,CAArD;AAIA,SAAOJ,MAAP;AACH,C,CAED;;;AACA,IAAI7B,gBAAgB,GAAG9I,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,CAAvB;;AACA,IAAI6I,gBAAJ,EAAsB;AAClB,MAAIkC,MAAM,GAAGhL,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,CAAb;AACA,MAAIgL,YAAY,GAAG,KAAnB;AACA,MAAIC,iBAAiB,GAAGlL,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,CAAxB;AACA,MAAIkL,gBAAgB,GAAGnL,QAAQ,CAACC,aAAT,CAAuB,cAAvB,KAA0CD,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,CAAjE,CAJkB,CAMlB;;AACA,MAAKiL,iBAAiB,IAAIZ,QAAQ,CAACY,iBAAiB,CAACvK,WAAnB,EAAgC,CAAhC,CAAR,GAA6C,CAAnE,IACIqK,MAAM,IAAIA,MAAM,CAAC3H,YAAP,CAAoB,SAApB,MAAmC,MADrD,EAC8D;AAAG;AAC7D8F,iBAAa,CAACL,gBAAD,CAAb;AACH;;AAED,MAAIqC,gBAAgB,CAACC,QAArB,EAA+B;AAC3BjC,iBAAa,CAACL,gBAAD,CAAb;AACH;;AAEDzI,GAAC,CAAC,MAAD,CAAD,CAAUgL,EAAV,CAAa,wBAAb,EAAuC,YAAY;AAC/ClC,iBAAa,CAACL,gBAAD,CAAb;AACH,GAFD;AAIAzI,GAAC,CAAC,MAAD,CAAD,CAAUgL,EAAV,CAAa,aAAb,EAA4B,YAAY;AACpCH,qBAAiB,GAAGZ,QAAQ,CAACtK,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,EAA6CU,WAA9C,EAA2D,CAA3D,CAA5B;;AACA,QAAIwK,gBAAgB,CAACC,QAArB,EAA+B;AAC3BjC,mBAAa,CAACL,gBAAD,CAAb;AACH;;AACD,QAAIoC,iBAAiB,KAAK,CAAtB,IAA2B,CAACC,gBAAgB,CAACC,QAAjD,EAA2D;AACvDlC,mBAAa,CAACJ,gBAAD,CAAb;AACH;AACJ,GARD;AAUAzI,GAAC,CAAC,MAAD,CAAD,CAAUgL,EAAV,CAAa,sBAAb,EAAqC,YAAY;AAC7CH,qBAAiB,GAAGZ,QAAQ,CAACtK,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,EAA6CU,WAA9C,EAA2D,CAA3D,CAA5B;AACAqK,UAAM,GAAGhL,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,CAAT;AACAgL,gBAAY,GAAG,KAAf;;AACA,QAAID,MAAJ,EAAY;AACRC,kBAAY,GAAGD,MAAM,CAAC3H,YAAP,CAAoB,SAApB,MAAmC,MAAlD;AACH;;AAED,QAAI6H,iBAAiB,KAAK,CAA1B,EAA6B;AACzB,UAAIC,gBAAgB,CAACC,QAAjB,IAA6BH,YAAjC,EAA+C;AAC3C9B,qBAAa,CAACL,gBAAD,CAAb;AACH;;AACD,UAAI,CAACqC,gBAAgB,CAACC,QAAlB,IAA8B,CAACH,YAAnC,EAAiD;AAC7C/B,qBAAa,CAACJ,gBAAD,CAAb;AACH;AACJ;AACJ,GAhBD;AAiBH;;;;;;;;;;;;;;AC1ID;AAAA;AAAA;AAAA;AAAA;AAKA;AAIA;;AAIA,IAAMjJ,cAAc,GAAGC,mBAAO,CAAC,mFAAD,CAA9B;;AACA,IAAIC,gBAAgB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAvB;AACA,IAAIC,MAAM,GAAGL,cAAc,CAACE,gBAAD,CAA3B;AACA,IAAIwG,GAAJ;AACA,IAAIC,IAAJ;AACA,IAAIC,iBAAJ;AAEA;;;;;;AAKA,SAAS7D,sBAAT,GAAkC;AAC9B1C,QAAM,CAACa,IAAP;AACA,MAAIiG,GAAG,GAAGC,6EAAuB,EAAjC;;AACA,MAAID,GAAG,CAACE,IAAR,EAAc;AACVV,QAAI,GAAGQ,GAAG,CAACG,OAAX;AACAV,qBAAiB,GAAGO,GAAG,CAACE,IAAJ,CAASE,UAAT,CAAoBC,wBAAxC;AACAd,OAAG,GAAGS,GAAG,CAACT,GAAV;AACH,GAJD,MAIO;AACHrG,UAAM,CAACmB,IAAP;AACA,UAAM,IAAIiG,KAAJ,CAAUN,GAAG,CAAC5G,OAAJ,IAAe,cAAzB,CAAN;AACH;;AACD,MAAImC,UAAU,GAAG,IAAjB;AACA,SAAOD,qEAAwB,CAACC,UAAD,CAAxB,CACFH,IADE,CACG,UAACK,IAAD;AAAA,WAAUA,IAAI,CAAC6I,KAAf;AAAA,GADH,EAEFC,IAFE,CAEG,YAAM;AACRrL,UAAM,CAACmB,IAAP;AACH,GAJE,CAAP;AAKH;AAED;;;;;;;;AAMA,SAASyG,SAAT,OAAqC;AAAA,MAAhBnF,YAAgB,QAAhBA,YAAgB;AACjC,SAAOD,uEAA0B,CAACC,YAAD,CAA1B,CACFP,IADE,CACG,iBAAmB;AAAA,QAAhBoJ,EAAgB,SAAhBA,EAAgB;AAAA,QAAZC,KAAY,SAAZA,KAAY;AACrB,QAAIvI,mBAAmB,GAAGH,sEAAyB,CAAC;AAChD2I,wBAAkB,EAAEF,EAD4B;AAEhDG,gCAA0B,EAAEF,KAAK,CAACG,UAAN,CAAiBC;AAFG,KAAD,EAGhD7L,QAAQ,CAACC,aAAT,CAAuB,+BAAvB,CAHgD,CAAnD;AAKA,WAAOI,CAAC,CAACW,IAAF,CAAO;AACVG,UAAI,EAAE,MADI;AAEVF,SAAG,EAAET,MAAM,CAACU,UAAP,CAAkB4C,cAFb;AAGVrB,UAAI,EAAES,mBAHI;AAIVL,iBAAW,EAAE,KAJH;AAKVkB,iBAAW,EAAE,KALH;AAMVqE,cAAQ,EAAE;AANA,KAAP,CAAP;AAQH,GAfE,EAgBFhG,IAhBE,CAgBG,YAAM;AACRlC,UAAM,CAACmB,IAAP;AACAb,UAAM,CAACc,QAAP,CAAgBC,IAAhB,GAAuBf,MAAM,CAACU,UAAP,CAAkBM,eAAzC;AACH,GAnBE,EAoBF+J,IApBE,CAoBG,YAAM;AACRrL,UAAM,CAACmB,IAAP;AACAb,UAAM,CAACc,QAAP,CAAgBC,IAAhB,GAAuBf,MAAM,CAACU,UAAP,CAAkB8G,QAAzC;AACH,GAvBE,CAAP;AAwBH;AAED;;;;;;AAIA,SAASC,QAAT,GAAoB;AAChB,MAAIC,SAAS,GAAG;AACZ3B,OAAG,EAAEA,GADO;AAEZC,QAAI,EAAEA;AAFM,GAAhB;AAKAnG,GAAC,CAACW,IAAF,CAAO;AACHC,OAAG,EAAEkH,iEAAW,CAAC1B,iBAAD,EAAoByB,SAApB,CADb;AAEH/G,QAAI,EAAE,KAFH;AAGHiH,YAAQ,EAAE,MAHP;AAIHhH,WAAO,EAAE,mBAAY;AACjBf,OAAC,CAACgI,OAAF,GAAYC,IAAZ;AACH,KANE;AAOH7G,SAAK,EAAE,iBAAY;AACfpB,OAAC,CAACgI,OAAF,GAAYC,IAAZ;AACH;AATE,GAAP;AAWApI,QAAM,CAACmB,IAAP;AACH;AAED;;;;;;AAIA,SAASkH,OAAT,GAAmB;AACf,MAAIhC,GAAJ,EAAS;AACL,QAAI2B,SAAS,GAAG;AACZ3B,SAAG,EAAEA,GADO;AAEZC,UAAI,EAAEA;AAFM,KAAhB;AAKAnG,KAAC,CAACW,IAAF,CAAO;AACHC,SAAG,EAAEkH,iEAAW,CAAC1B,iBAAD,EAAoByB,SAApB,CADb;AAEH/G,UAAI,EAAE,KAFH;AAGHiH,cAAQ,EAAE,MAHP;AAIHhH,aAAO,EAAE,mBAAY;AACjBf,SAAC,CAACgI,OAAF,GAAYC,IAAZ;AACH,OANE;AAOH7G,WAAK,EAAE,iBAAY;AACfpB,SAAC,CAACgI,OAAF,GAAYC,IAAZ;AACH;AATE,KAAP;AAWH;;AACDpI,QAAM,CAACmB,IAAP;AACAb,QAAM,CAACc,QAAP,CAAgBC,IAAhB,GAAuBf,MAAM,CAACU,UAAP,CAAkB8G,QAAzC;AACH;AAED;;;;;AAGA,SAASiB,kBAAT,GAA8B;AAC1B/I,QAAM,CAACa,IAAP;AACAP,QAAM,CAACkI,MAAP,CAAcC,OAAd,CAAsB;AAClB/F,0BAAsB,EAAtBA,sBADkB;AAElBkF,aAAS,EAATA,SAFkB;AAGlBG,YAAQ,EAARA,QAHkB;AAIlBM,WAAO,EAAPA,OAJkB;AAKlB3H,SAAK,EAAE8D,oEAAoB,CAAC1E,QAAQ,CAACC,aAAT,CAAuB,+BAAvB,CAAD;AALT,GAAtB,EAMG2I,MANH,CAMU,oBANV,EAOKxG,IAPL,CAOU,YAAM;AACRlC,UAAM,CAACmB,IAAP;AACH,GATL;AAUH;;AAEc4H,iFAAf,E","file":"int_paypal_pdp.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./cartridges/int_paypal/cartridge/client/default/js/pdp/pdp.js\");\n","var loaderInstance = require('./loader');\r\nvar $loaderContainer = document.querySelector('.paypalLoader');\r\nvar loader = loaderInstance($loaderContainer);\r\n/**\r\n *  Appends error message on cart page\r\n *\r\n * @param {string} message error message\r\n */\r\nfunction showCartErrorHtml(message) {\r\n    $('.checkout-btn').addClass('disabled');\r\n    $('.cart-error').append(\r\n        `<div class=\"alert alert-danger alert-dismissible valid-cart-error fade show cartError\" role=\"alert\">\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n            ${message}\r\n        </div>`\r\n    );\r\n    window.scrollTo(0, 0);\r\n}\r\n\r\n/**\r\n *  Appends error message on billing checkout page\r\n *\r\n * @param {string} message error message\r\n */\r\nfunction showCheckoutErrorHtml(message) {\r\n    document.querySelector('.error-message-text').textContent = '';\r\n    document.querySelector('.error-message').style.display = 'block';\r\n    document.querySelector('.error-message-text').append(message);\r\n    window.scrollTo(0, 0);\r\n}\r\n\r\n/**\r\n * Updates information about an order\r\n *\r\n * @returns {Object} Call handling result\r\n */\r\nfunction updateOrderData() {\r\n    loader.show();\r\n    return $.ajax({\r\n        url: window.paypalUrls.updateOrderData + '?isCartFlow=true',\r\n        type: 'PATCH',\r\n        success: () => {\r\n            loader.hide();\r\n            window.location.href = window.paypalUrls.placeOrderStage;\r\n        },\r\n        error: (err) => {\r\n            loader.hide();\r\n            var error = JSON.parse(err.responseText);\r\n            showCartErrorHtml(error.errorMsg);\r\n            if (error.transactionExpired) {\r\n                location.reload();\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Gets purchase units\r\n *\r\n * @returns {Object} with purchase units data\r\n */\r\nfunction getPurchaseUnits() {\r\n    return $.get(window.paypalUrls.getPurchaseUnit)\r\n        .then(({ purchase_units }) => purchase_units);\r\n}\r\n\r\n/**\r\n * Gets Billing Agreement Token\r\n *\r\n * @param {boolean} isCartFlow - billing agreement flow from cart\r\n * @returns {string} billingToken - returns a JSON response that includes token, an approval URL\r\n */\r\nfunction getBillingAgreementToken(isCartFlow = false) {\r\n    return $.get(window.paypalUrls.createBillingAgreementToken + `?isCartFlow=${isCartFlow}`)\r\n        .then((data) => data);\r\n}\r\n\r\n/**\r\n * Gets Billing Agreement\r\n * After buyer approval, you use a billing agreement token to create the agreement.\r\n *\r\n * @param {string} billingToken - billing agreement token\r\n * @returns {Object} JSON response body that includes the billing agreement ID,\r\n * the state of the agreement, which is ACTIVE, and information about the payer\r\n */\r\nfunction createBillingAgreementCall(billingToken) {\r\n    return $.ajax({\r\n        url: window.paypalUrls.createBillingAgreement,\r\n        type: 'POST',\r\n        contentType: 'application/json',\r\n        data: JSON.stringify({ billingToken })\r\n    });\r\n}\r\n\r\n/**\r\n * Create billing formData from fields data\r\n *\r\n * @param {Object} fieldsData - fields data values\r\n * @param {Elemtn} $paypalButton - paypal button selector\r\n * @returns {Object} cart billing form data\r\n */\r\nfunction createCartBillingFormData(fieldsData, $paypalButton) {\r\n    var cartBillingFormData = new FormData();\r\n    if (!$paypalButton) {\r\n        $paypalButton = document.querySelector('#paypal_pdp_image') || document.querySelector('#paypal_image') || document.querySelector('#venmo_image');\r\n    }\r\n    var cartBillingFields = $paypalButton && JSON.parse($paypalButton.getAttribute('data-paypal-billing-form-fields'));\r\n\r\n    Object.entries(cartBillingFields).forEach(entry => {\r\n        const [key, field] = entry;\r\n        if (typeof field === 'object') {\r\n            cartBillingFormData.append(field.name, fieldsData && fieldsData[key] ? fieldsData[key] : field.value);\r\n        }\r\n    });\r\n\r\n    return cartBillingFormData;\r\n}\r\n\r\n/**\r\n * Calls to returnFromCart endpoint, redirects to place order stage or shows error if it exists\r\n *\r\n * @returns {Object} Call handling result\r\n */\r\nfunction returnFromCart() {\r\n    loader.show();\r\n    let cartBillingFormData = createCartBillingFormData();\r\n\r\n    return $.ajax({\r\n        url: window.paypalUrls.returnFromCart,\r\n        type: 'POST',\r\n        contentType: false,\r\n        data: cartBillingFormData,\r\n        processData: false,\r\n        success: () => {\r\n            loader.hide();\r\n            window.location.href = window.paypalUrls.placeOrderStage;\r\n        },\r\n        error: function (err) {\r\n            loader.hide();\r\n            showCartErrorHtml(err.responseText);\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Call finishLpmOrder endpoint\r\n * @param  {Object} details billing address details\r\n * @returns {Promise} ajax call\r\n */\r\nfunction finishLpmOrder(details) {\r\n    const lpmName = document.querySelector('#usedPaymentMethod').value;\r\n    const paypalMethodId = document.querySelector('#paypalMethodId').value;\r\n    return $.ajax({\r\n        url: window.paypalUrls.finishLpmOrder,\r\n        type: 'POST',\r\n        contentType: 'application/json',\r\n        data: JSON.stringify({\r\n            details,\r\n            lpmName,\r\n            paypalMethodId\r\n        })\r\n    });\r\n}\r\n\r\nexport {\r\n    updateOrderData,\r\n    getPurchaseUnits,\r\n    getBillingAgreementToken,\r\n    createBillingAgreementCall,\r\n    returnFromCart,\r\n    showCartErrorHtml,\r\n    showCheckoutErrorHtml,\r\n    finishLpmOrder,\r\n    createCartBillingFormData\r\n};\r\n","const defaultStyle = {\r\n    color: 'gold',\r\n    shape: 'rect',\r\n    layout: 'vertical',\r\n    label: 'paypal',\r\n    tagline: false\r\n};\r\n\r\n/**\r\n *  Gets paypal button styles\r\n * @param {Element} button - button element\r\n * @returns {Object} with button styles or if error appears with default styles\r\n */\r\nfunction getPaypalButtonStyle(button) {\r\n    try {\r\n        const config = button.getAttribute('data-paypal-button-config');\r\n        if (config) {\r\n            const buttonConfigs = JSON.parse(config);\r\n            return buttonConfigs.style;\r\n        }\r\n    } catch (error) {\r\n        return {\r\n            style: defaultStyle\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n * Creates a redirecting form to Order-Confirm endpoint\r\n * @param {Object} param  The helping object for creating a from\r\n * @returns {Object} form element\r\n */\r\nfunction createConfirmForm(param) {\r\n    var form = $('<form>')\r\n        .appendTo(document.body)\r\n        .attr({\r\n            method: 'POST',\r\n            action: param.url\r\n        });\r\n\r\n    $('<input>')\r\n        .appendTo(form)\r\n        .attr({\r\n            name: 'orderID',\r\n            value: param.orderID\r\n        });\r\n\r\n    $('<input>')\r\n        .appendTo(form)\r\n        .attr({\r\n            name: 'orderToken',\r\n            value: param.orderToken\r\n        });\r\n\r\n    return form;\r\n}\r\n\r\n/**\r\n * Prepare and submits form in order to confirm order with Lpm\r\n * @param {string} redirectUrl Redirect Url\r\n */\r\nfunction processLpmConfirmForm(redirectUrl) {\r\n    var splitUrl = redirectUrl.split('?');\r\n    var url = splitUrl[0];\r\n    var paramsString = splitUrl[1];\r\n    var searchParams = new URLSearchParams(paramsString);\r\n    var formParam = {\r\n        orderID: searchParams.get('orderID'),\r\n        orderToken: searchParams.get('orderToken'),\r\n        url: url\r\n    };\r\n    var form = createConfirmForm(formParam);\r\n\r\n    form.submit();\r\n}\r\n\r\nexport {\r\n    getPaypalButtonStyle,\r\n    processLpmConfirmForm\r\n};\r\n","/* eslint-disable require-jsdoc */\r\nmodule.exports = function (containerElement) {\r\n    function Constructor() {\r\n        this.containerEl = containerElement;\r\n    }\r\n    Constructor.prototype.show = function () {\r\n        this.containerEl.style.display = 'block';\r\n    };\r\n    Constructor.prototype.hide = function () {\r\n        this.containerEl.style.display = 'none';\r\n    };\r\n    return new Constructor();\r\n};\r\n","import {\r\n    showCartErrorHtml,\r\n    createCartBillingFormData\r\n} from '../api';\r\nimport {\r\n    addProductForPDPbtnFlow,\r\n    appendToUrl\r\n} from './pdpHelper';\r\nimport {\r\n    getPaypalButtonStyle\r\n} from '../helper';\r\n\r\nvar loaderInstance = require('../loader');\r\nvar $loaderContainer = document.querySelector('.paypalLoader');\r\nvar loader = loaderInstance($loaderContainer);\r\nvar pid;\r\nvar uuid;\r\nvar removeFromCartUrl;\r\nvar usedPaymentMethod;\r\n\r\n/**\r\n * Saves used payment method to variable\r\n *\r\n * @param {Object} data - object with data\r\n */\r\nfunction onClick(data) {\r\n    if (data.fundingSource === 'venmo') {\r\n        usedPaymentMethod = 'Venmo';\r\n    }\r\n}\r\n\r\n/**\r\n *  Gets purchase units object, creates order and returns object with data\r\n *\r\n * @param {Object} _ - arg\r\n * @param {Object} actions - paypal actions\r\n * @returns {Object} with purchase units data and application context\r\n */\r\nfunction createOrder(_, actions) {\r\n    loader.show();\r\n    var res = addProductForPDPbtnFlow();\r\n    if (res.cart) {\r\n        uuid = res.pliUUID;\r\n        removeFromCartUrl = res.cart.actionUrls.removeProductLineItemUrl;\r\n        pid = res.pid;\r\n    } else {\r\n        loader.hide();\r\n        throw new Error(res.message || 'Error occurs');\r\n    }\r\n\r\n    return $\r\n        .get(window.paypalUrls.getCartPurchaseUnit)\r\n        .then(function ({ purchase_units }) {\r\n            let parsedPurchaseUnit = purchase_units[0];\r\n            if (JSON.parse(parsedPurchaseUnit.amount.value) === 0) {\r\n                showCartErrorHtml('Order total 0 is not allowed for PayPal');\r\n            }\r\n            const application_context = {\r\n                shipping_preference: parsedPurchaseUnit.shipping_preference\r\n            };\r\n            loader.hide();\r\n            return actions.order.create({\r\n                purchase_units,\r\n                application_context\r\n            });\r\n        });\r\n}\r\n\r\n/**\r\n *  Makes post call and transfers order ID to returnFromCart endpoint, goes to checkout place order stage\r\n *\r\n * @param {Object} orderID - order id\r\n */\r\nfunction onApprove({ orderID }) {\r\n    let cartBillingFormData = createCartBillingFormData({\r\n        paypalOrderID: orderID,\r\n        usedPaymentMethod: usedPaymentMethod\r\n    }, document.querySelector('.js_paypal_button_on_pdp_page'));\r\n\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: window.paypalUrls.returnFromCart,\r\n        contentType: false,\r\n        data: cartBillingFormData,\r\n        processData: false,\r\n        success: () => {\r\n            loader.hide();\r\n            window.location.href = window.paypalUrls.placeOrderStage;\r\n        },\r\n        error: function () {\r\n            loader.hide();\r\n            window.location.href = window.paypalUrls.cartPage;\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Hides loader on paypal widget closing without errors\r\n * If PDP flow, removes product from basket on cancel\r\n */\r\nfunction onCancel() {\r\n    var urlParams = {\r\n        pid: pid,\r\n        uuid: uuid\r\n    };\r\n\r\n    $.ajax({\r\n        url: appendToUrl(removeFromCartUrl, urlParams),\r\n        type: 'get',\r\n        dataType: 'json',\r\n        success: function () {\r\n            $.spinner().stop();\r\n        },\r\n        error: function () {\r\n            $.spinner().stop();\r\n        }\r\n    });\r\n    loader.hide();\r\n}\r\n\r\n/**\r\n * Shows errors if paypal widget was closed with errors\r\n * If PDP flow, removes product from basket on error\r\n */\r\nfunction onError() {\r\n    if (pid) {\r\n        var productID = pid;\r\n        var urlParams = {\r\n            pid: productID,\r\n            uuid: uuid\r\n        };\r\n\r\n        $.ajax({\r\n            url: appendToUrl(removeFromCartUrl, urlParams),\r\n            type: 'get',\r\n            dataType: 'json',\r\n            success: function () {\r\n                $.spinner().stop();\r\n            },\r\n            error: function () {\r\n                $.spinner().stop();\r\n            }\r\n        });\r\n    }\r\n    loader.hide();\r\n    window.location.href = window.paypalUrls.cartPage;\r\n}\r\n\r\n/**\r\n *Inits paypal button on cart page\r\n */\r\nfunction initPaypalButton() {\r\n    loader.show();\r\n    window.paypal.Buttons({\r\n        onClick,\r\n        createOrder,\r\n        onApprove,\r\n        onCancel,\r\n        onError,\r\n        style: getPaypalButtonStyle(document.querySelector('.js_paypal_button_on_pdp_page'))\r\n    }).render('.paypal-pdp-button')\r\n        .then(() => {\r\n            loader.hide();\r\n        });\r\n}\r\n\r\nexport default initPaypalButton;\r\n","/* eslint-disable no-nested-ternary */\r\nimport initPaypalButton from './initPdpButton';\r\nimport initPaypalBAButton from './registered/initBillingAgreementButton';\r\nimport { returnFromCart } from '../api';\r\nimport { addProductForPDPbtnFlow } from './pdpHelper';\r\n\r\nconst loaderInstance = require('../loader');\r\nlet $loaderContainer = document.querySelector('.paypalLoader');\r\nlet loader = loaderInstance($loaderContainer);\r\n\r\nlet $paypalPdpImage = document.querySelector('#paypal_pdp_image');\r\nlet $paypalPDPButton = document.querySelector('.js_paypal_button_on_pdp_page');\r\nlet $isBAEnabled = $paypalPDPButton && JSON.parse($paypalPDPButton.getAttribute('data-paypal-ba-enabled'));\r\nconst paypalUrls = document.querySelector('.js_paypal-content').getAttribute('data-paypal-urls');\r\nwindow.paypalUrls = JSON.parse(paypalUrls);\r\n\r\nif ($paypalPdpImage) {\r\n    $paypalPdpImage.addEventListener('click', function () {\r\n        loader.show();\r\n        var res = addProductForPDPbtnFlow();\r\n        if (res.cart) {\r\n            returnFromCart();\r\n        } else {\r\n            loader.hide();\r\n            throw new Error(res.message || 'Error occurs');\r\n        }\r\n    });\r\n} else if (window.paypal) {\r\n    $isBAEnabled ?\r\n            initPaypalBAButton() :\r\n            initPaypalButton();\r\n}\r\n","/**\r\n * Shows paypal PDP button/static image\r\n * @param {Object} $paypalPDPButton - paypal button element\r\n */\r\nfunction showPDPButton($paypalPDPButton) {\r\n    $paypalPDPButton.style.display = '';\r\n}\r\n\r\n/**\r\n * Hides paypal PDP button/static image\r\n * @param {Object} $paypalPDPButton - paypal button element\r\n */\r\nfunction hidePDPButton($paypalPDPButton) {\r\n    $paypalPDPButton.style.display = 'none';\r\n}\r\n\r\n/**\r\n * Adds product to basket on paypal button/static image click when PDP flow\r\n * @returns {Object} response with required data\r\n */\r\nfunction addProductForPDPbtnFlow() {\r\n    var $bundleItem = $('.bundle-item');\r\n    /**\r\n     * Gets options\r\n     * @param {Object} $productContainer - product container\r\n     * @returns {string} options\r\n     */\r\n    function getOptions($productContainer) {\r\n        var options = $productContainer\r\n            .find('.product-option')\r\n            .map(function () {\r\n                var $elOption = $(this).find('.options-select');\r\n                var urlValue = $elOption.val();\r\n                var selectedValueId = $elOption.find('option[value=\"' + urlValue + '\"]')\r\n                    .data('value-id');\r\n                return {\r\n                    optionId: $(this).data('option-id'),\r\n                    selectedValueId: selectedValueId\r\n                };\r\n            }).toArray();\r\n\r\n        return JSON.stringify(options);\r\n    }\r\n\r\n    var pid = $('.product-detail:not(\".bundle-item\")').data('pid');\r\n    var $btn = $('.paypal_pdp_button');\r\n    var $productContainer = $btn.closest('.product-detail');\r\n\r\n    var form = {\r\n        pid: pid,\r\n        quantity: $('.quantity-select').val()\r\n    };\r\n\r\n    if (!$bundleItem.length) {\r\n        form.options = getOptions($productContainer);\r\n    } else {\r\n        var items = $bundleItem.map(function () {\r\n            return {\r\n                pid: $(this).find('.product-id').text(),\r\n                quantity: parseInt($(this).find('label.quantity').data('quantity'), 10)\r\n            };\r\n        });\r\n        form.childProducts = JSON.stringify(items.toArray());\r\n    }\r\n    var response = $.ajax({\r\n        url: $('.add-to-cart-url').val(),\r\n        method: 'POST',\r\n        async: false,\r\n        data: form\r\n    }).responseJSON;\r\n    response.pid = pid;\r\n    return response;\r\n}\r\n\r\n/**\r\n * Appends params to a url\r\n * @param {string} url - Original url\r\n * @param {Object} param - Parameters to append\r\n * @returns {string} result url with appended parameters\r\n */\r\nfunction appendToUrl(url, param) {\r\n    var newUrl = url;\r\n    newUrl += (newUrl.indexOf('?') !== -1 ? '&' : '?') + Object.keys(param).map(function (key) {\r\n        return key + '=' + encodeURIComponent(param[key]);\r\n    }).join('&');\r\n\r\n    return newUrl;\r\n}\r\n\r\n// Handling PDP button/static image behavior\r\nvar $paypalPDPButton = document.querySelector('.paypal_pdp_button');\r\nif ($paypalPDPButton) {\r\n    var $price = document.querySelector('.price .sales .value');\r\n    var isZeroAmount = false;\r\n    var $miniCartQuantity = document.querySelector('.minicart-quantity');\r\n    var $addToCartButton = document.querySelector('.add-to-cart') || document.querySelector('.add-to-cart-global');\r\n\r\n    // Check minicart quantity and hide PDPbutton if it is not empty\r\n    if (($miniCartQuantity && parseInt($miniCartQuantity.textContent, 0) > 0)\r\n        || ($price && $price.getAttribute('content') === '0.00')) {  // Check if product price is zero\r\n        hidePDPButton($paypalPDPButton);\r\n    }\r\n\r\n    if ($addToCartButton.disabled) {\r\n        hidePDPButton($paypalPDPButton);\r\n    }\r\n\r\n    $('body').on('product:afterAddToCart', function () {\r\n        hidePDPButton($paypalPDPButton);\r\n    });\r\n\r\n    $('body').on('cart:update', function () {\r\n        $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\r\n        if ($addToCartButton.disabled) {\r\n            hidePDPButton($paypalPDPButton);\r\n        }\r\n        if ($miniCartQuantity === 0 && !$addToCartButton.disabled) {\r\n            showPDPButton($paypalPDPButton);\r\n        }\r\n    });\r\n\r\n    $('body').on('product:statusUpdate', function () {\r\n        $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\r\n        $price = document.querySelector('.price .sales .value');\r\n        isZeroAmount = false;\r\n        if ($price) {\r\n            isZeroAmount = $price.getAttribute('content') === '0.00';\r\n        }\r\n\r\n        if ($miniCartQuantity === 0) {\r\n            if ($addToCartButton.disabled || isZeroAmount) {\r\n                hidePDPButton($paypalPDPButton);\r\n            }\r\n            if (!$addToCartButton.disabled && !isZeroAmount) {\r\n                showPDPButton($paypalPDPButton);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport {\r\n    addProductForPDPbtnFlow,\r\n    appendToUrl\r\n};\r\n","import {\r\n    getBillingAgreementToken,\r\n    createBillingAgreementCall,\r\n    createCartBillingFormData\r\n} from '../../api';\r\nimport {\r\n    addProductForPDPbtnFlow,\r\n    appendToUrl\r\n} from '../pdpHelper.js';\r\nimport {\r\n    getPaypalButtonStyle\r\n} from '../../helper';\r\n\r\nconst loaderInstance = require('../../loader');\r\nlet $loaderContainer = document.querySelector('.paypalLoader');\r\nlet loader = loaderInstance($loaderContainer);\r\nvar pid;\r\nvar uuid;\r\nvar removeFromCartUrl;\r\n\r\n/**\r\n *  Create's Billing Agreement\r\n *\r\n * @returns {string} returns JSON response that includes an data token\r\n */\r\nfunction createBillingAgreement() {\r\n    loader.show();\r\n    var res = addProductForPDPbtnFlow();\r\n    if (res.cart) {\r\n        uuid = res.pliUUID;\r\n        removeFromCartUrl = res.cart.actionUrls.removeProductLineItemUrl;\r\n        pid = res.pid;\r\n    } else {\r\n        loader.hide();\r\n        throw new Error(res.message || 'Error occurs');\r\n    }\r\n    let isCartFlow = true;\r\n    return getBillingAgreementToken(isCartFlow)\r\n        .then((data) => data.token)\r\n        .fail(() => {\r\n            loader.hide();\r\n        });\r\n}\r\n\r\n/**\r\n *  Makes post call and transfers billingToken to returnFromCart endpoint, triggers checkout (stage = place order)\r\n *\r\n * @param {string} billingToken - billing agreement token\r\n * @returns {Object} JSON response that includes the billing agreement ID and information about the payer\r\n */\r\nfunction onApprove({ billingToken }) {\r\n    return createBillingAgreementCall(billingToken)\r\n        .then(({ id, payer }) => {\r\n            let cartBillingFormData = createCartBillingFormData({\r\n                billingAgreementID: id,\r\n                billingAgreementPayerEmail: payer.payer_info.email\r\n            }, document.querySelector('.js_paypal_button_on_pdp_page'));\r\n\r\n            return $.ajax({\r\n                type: 'POST',\r\n                url: window.paypalUrls.returnFromCart,\r\n                data: cartBillingFormData,\r\n                contentType: false,\r\n                processData: false,\r\n                dataType: 'json'\r\n            });\r\n        })\r\n        .then(() => {\r\n            loader.hide();\r\n            window.location.href = window.paypalUrls.placeOrderStage;\r\n        })\r\n        .fail(() => {\r\n            loader.hide();\r\n            window.location.href = window.paypalUrls.cartPage;\r\n        });\r\n}\r\n\r\n/**\r\n * Hides loader on paypal widget closing without errors\r\n * If PDP flow, removes product from basket on cancel\r\n */\r\nfunction onCancel() {\r\n    var urlParams = {\r\n        pid: pid,\r\n        uuid: uuid\r\n    };\r\n\r\n    $.ajax({\r\n        url: appendToUrl(removeFromCartUrl, urlParams),\r\n        type: 'get',\r\n        dataType: 'json',\r\n        success: function () {\r\n            $.spinner().stop();\r\n        },\r\n        error: function () {\r\n            $.spinner().stop();\r\n        }\r\n    });\r\n    loader.hide();\r\n}\r\n\r\n/**\r\n * Shows errors if paypal widget was closed with errors\r\n * If PDP flow, removes product from basket on error\r\n */\r\nfunction onError() {\r\n    if (pid) {\r\n        var urlParams = {\r\n            pid: pid,\r\n            uuid: uuid\r\n        };\r\n\r\n        $.ajax({\r\n            url: appendToUrl(removeFromCartUrl, urlParams),\r\n            type: 'get',\r\n            dataType: 'json',\r\n            success: function () {\r\n                $.spinner().stop();\r\n            },\r\n            error: function () {\r\n                $.spinner().stop();\r\n            }\r\n        });\r\n    }\r\n    loader.hide();\r\n    window.location.href = window.paypalUrls.cartPage;\r\n}\r\n\r\n/**\r\n *Inits paypal Billing Agreement button on billing checkout page\r\n */\r\nfunction initPaypalBAButton() {\r\n    loader.show();\r\n    window.paypal.Buttons({\r\n        createBillingAgreement,\r\n        onApprove,\r\n        onCancel,\r\n        onError,\r\n        style: getPaypalButtonStyle(document.querySelector('.js_paypal_button_on_pdp_page'))\r\n    }).render('.paypal-pdp-button')\r\n        .then(() => {\r\n            loader.hide();\r\n        });\r\n}\r\n\r\nexport default initPaypalBAButton;\r\n"],"sourceRoot":""}